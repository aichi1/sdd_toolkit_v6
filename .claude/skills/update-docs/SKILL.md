# /update-docs: ドキュメント充実化コマンド

docs/ 配下のドキュメントを対話的に充実させる。
成果物の品質はdocs/の充実度に直結するため、Phase実行前にこのコマンドを使うことを強く推奨する。

## 入力

$ARGUMENTS で対象を指定。例:
- "{ファイル名}": 特定のドキュメントを充実化
- "gaps": 全ドキュメントのTODO/空白箇所を洗い出す
- "validate": 全ドキュメント間の整合性チェック
- 空: 全ドキュメントの充実度を診断し、優先順位を提案

---

## 実行手順

### 空 or "gaps" の場合: 診断モード

1. docs/ 配下の全ファイルを読み込む
2. 以下の観点で各ファイルの充実度を診断する:
   - `[TODO]` `[要確認]` `[要調査]` 等の未解決マーカーの数
   - セクションの中身が薄い（1-2行しかない）箇所
   - 他ドキュメントから参照されているが内容が不足している情報
   - skills/ のSKILL.mdが「参照ドキュメント」として期待する情報の有無

3. 診断結果を優先度付きで報告:

```
📊 docs/ 充実度診断

{ファイル名1}: ████████░░ 80%
  - [TODO] が 2 箇所
  - {具体的に不足している情報}

{ファイル名2}: ████░░░░░░ 40%
  - セクション「{名前}」の内容が不足
  - skills/phase-02 が参照する「{情報}」が未記載

🔑 優先的に充実させるべきファイル:
  1. {ファイル名} — {理由}
  2. {ファイル名} — {理由}

▶️ /update-docs {ファイル名} で対話的に充実化できます。
```

### 特定ファイル指定の場合: 充実化モード

1. 対象ファイルを読み込む
2. 不足箇所を特定する
3. 各不足箇所について、以下のいずれかを実行:
   a. ユーザに質問して情報を取得する
   b. Claude自身の知識で補完できる場合は提案し、ユーザの承認を得る
   c. 調査が必要な場合は `[要調査: {何を調べるべきか}]` として明示する

4. ユーザとの対話で得た情報をドキュメントに反映する
5. 更新結果を差分表示する

### "validate" の場合: 整合性チェック

1. 全ドキュメントを読み込む
2. 以下をチェック:
   - 数値の矛盾（あるファイルで100m²、別のファイルで120m²など）
   - 用語の不統一（同じ概念を異なる名前で呼んでいる）
   - 参照の整合性（存在しないドキュメントへの参照がないか）
   - CLAUDE.md との整合性（プロジェクト概要と各docsの内容が一致しているか）
3. 問題を報告し、修正を提案する

---

## 対話のガイドライン

- 一度に聞く質問は最大3つまで
- 「わからない」「後で決める」という回答も受け入れる（[TODO]として保持）
- ユーザが提供した情報は正確にドキュメントに反映する（意訳しない）
- 技術的な情報はユーザのドメイン知識を尊重する
- Claude自身の知識で補完する場合は、必ず「Claudeの知識に基づく提案」と明示する
